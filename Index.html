<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="InspectionOverview">
  <meta name="author" content="">

  <title>Inspection Overview</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer/">
  <link rel="stylesheet" href="styles.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="GeneralScripts.js"></script>
</head>

<body>

  <!-- Begin page content -->
  <main role="main" class="container">
    <h1 class="mt-5">Sticky footer</h1>
    <p class="lead">Pin a fixed-height footer to the bottom of the viewport in desktop browsers with this custom HTML
      and CSS.</p>
    <p>Use the sticky footer with a fixed navbar if need be, too.</p>
  </main>

  <div>
    <form id="formElem">
      <label for="Username">Username:</label><br>
      <input type="text" id="Username"><br>
      <label for="Password">Password:</label><br>
      <input type="text" id="Password"><br>
      <input type="button" value="Login" onclick="Login()">
    </form>
  </div>

  <input type="button" value="GoTo Login" onclick="GoToLogin();">
  <input type="button" value="GoTo Overview" onclick="GoToOverview();">
  <input type="button" value="GoTo Dashboard" onclick="GoToDashboard();">
  <input type="button" value="DEBUG: Authenticate" onclick="SendAuthenticationKey();">

  <table class="table table-striped" id="TableList">
    <thead>
      <th>Country Name</th>
      <th>Region Name</th>
      <th>Continent Name</th>
      <th>Official Language(s)</th>
      <th>Other Language(s)</th>
    </thead>
    <tbody>
      <tr>
        <td>Country0</td>
        <td>Region0</td>
        <td>Continent0</td>
        <td>Official Language_0</td>
        <td>Other Language_0</td>
      </tr>
    </tbody>
  </table>

  <div id="Divider">Section Break</div>


  <div id="boxes">
    <div id="column1">
      <h1>Update </h1><br>
    </div>
    <div id="column2">
      <h1>Create new site</h1><br>
      <form id="formElem">
        <label for="SiteName">Name of the site:</label><br>
        <input type="text" id="SiteName"><br>
        <label for="DepartmentName">Region:</label><br>
        <select name="DepartmentName" id="DepartmentName"
          onchange="if (this.selectedIndex) GetContractManagersForDepartment();">
          <option disabled selected value> -- select a department -- </option>
        </select><br>
        <label for="ContractManagerName">Contract manager:</label><br>
        <select name="ContractManagerName" id="ContractManagerName">
          <option disabled selected value> -- select a department first -- </option>
        </select><br>
        <label for="CustomerName">Customer:</label><br>
        <select name="CustomerName" id="CustomerName">
          <option disabled selected value> -- select a customer -- </option>
        </select><br>
        <input type="button" value="Send" onclick="SubmitNewSite()">
      </form>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <span class="text-muted">Place sticky footer content here.</span>
    </div>
  </footer>

  <script>
    function GoToOverview() {
      window.location.href = 'SiteOverview.html';
    }
  </script>

<script>
  function GoToDashboard() {
    window.location.href = 'Dashboard.html';
  }
</script>

  <script>
    function SubmitNewSite() {
      let dataReceived = "";
      var myJSON = "{\"siteName\": \""+document.getElementById("SiteName").value+"\", \"customer\":{\"customerName\":\"" + document.getElementById("CustomerName").value + "\"},\"contractManager\":{\"contractManagerName\":\"" + document.getElementById("ContractManagerName").value + "\"},\"department\":{\"departmentName\":\"" + document.getElementById("DepartmentName").value + "\"}}"
      fetch("https://localhost:44374/api/SiteData", {
        method: "post",
        headers: {
          //"accept": "*/*",
          "Content-Type": "application/json"
        },
        body: myJSON
      })
      //.then(response=>alert("Site was submitted with Site ID: "+ JSON.stringify(response["siteID"])))
      //.then(response=>console.log(response))
    };
  </script>

  <script>
    fetch("https://localhost:44374/api/FormData")
      .then(response => response.json())
      .then(data => {
        let option = '';
        data.forEach(function (UnpackedJson) {
          allDepartments = Object.values(UnpackedJson.departments);
          select = document.getElementById('DepartmentName');
          allDepartments.forEach(function (Department) {
            ins = document.createElement('option');
            ins.value = Department.departmentName;
            ins.innerHTML = Department.departmentName;
            select.appendChild(ins);
          })
        allCustomers = Object.values(UnpackedJson.customers);
        select = document.getElementById('CustomerName');
        allCustomers.forEach(function (Customer) {
          ins = document.createElement('option');
          ins.value = Customer.customerName;
          ins.innerHTML = Customer.customerName;
          select.appendChild(ins);
        });
      });
    })
    .catch(error => {
      console.error(error);
    });
  </script>

  <script>
    function GetContractManagersForDepartment() {
      fetch("https://localhost:44374/api/FormData/" + document.getElementById("DepartmentName").value)
        .then(response => response.json())
        .then(data => {
          let option = '';
          data.forEach(function (UnpackedJson) {
            allContractManagers = Object.values(UnpackedJson.contractManagers);
            select = document.getElementById('ContractManagerName');
            var length = select.options.length;
            for (i = length - 1; i >= 0; i--) {
              select.options[i] = null;
            }
            allContractManagers.forEach(function (ContractManager) {
              ins = document.createElement('option');
              ins.value = ContractManager.contractManagerName;
              ins.innerHTML = ContractManager.contractManagerName;
              select.appendChild(ins);
            });
          });
        })
        .catch(error => {
          console.error(error);
        });
    }
  </script>

  <script>
    function GetCountry() {
      fetch("https://localhost:44374/api/CountryController?Name=" + document.getElementById("CountryName").value)
        .then(response => response.json())
        .then(data => {
          let tr = '';
          data.forEach(function (value) {
            console.log(value);
            tr += '<tr><td>' + value.countryName + '</td><td>' + value.regionName + '</td><td>' + value
              .continentName + '</td><td>' + value.officialLanguages + '</td><td>' + value.otherLanguages +
              '</td></tr>';
          });
          document.querySelector('#TableList tbody').innerHTML = tr;
          //Append the data
        })
        .catch(error => {
          // handle the error
          console.error(error);
        });
    }
  </script>
</body>

</html>